<html>
	<head>
		<style>
			html, body { margin: 0; padding: 0; }
		</style>
		<style>
			.sc {
				box-sizing: content-box;
				font-family: Sans-Serif;
			}
		
			.sc-toolbar {
				display: flex;
				justify-content: space-between;
			}
			
			.sc table {
				width: 100%;
				box-sizing: border-box;
				table-layout: fixed;
				border-collapse: collapse;
				border-spacing: 0;
			}
			
			.sc-day {
				height: 30px;
			}
			
			.sc-day > a {
				padding: 2px;
			}
			
			.sc-other-month {
				color: #aaa;
			}
			
			@media (min-width: 600px) {
				.sc td, .sc th {
					border-style: solid;
					border-width: 1px;
					padding: 0;
					vertical-align: top;
					border-color: #ddd;
				}
				
				.sc-day {
					text-align: right;
				}
			}
		</style>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	</head>
	<body>
		<div class="divcalendar"></div>
		<script>
			var Scheduler = (function (element, userConfigs) {
				configs = {
					date: new Date(),
					data: [],
					shortDay: true,
					shortMonth: false,
					mode: 'month'
				};
				
				days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
				shortDays = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
				months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
				renderDate = new Date();
				$currentView = $(document.createElement('div'));
				$divToolbar = $(document.createElement('div'));
				
				init = function () {
					renderDate = new Date(configs.date.getFullYear(), configs.date.getMonth(), 1);
					renderToolBar();
					$currentView.addClass('sc-view');
					renderBody();
					$element.append($currentView);
					$element.addClass('sc');
				};
				
				refreshView = function (data) {
					refreshToolbarTitle();
					clearBody();
					renderBody(data);
				};
				
				refreshToolbarTitle = function () {
					if (configs.mode == 'month') {
						$divToolbar.find('.sc-center').html('<span>' + months[renderDate.getMonth()] + ', ' + renderDate.getFullYear() + '</span>');
					}
					else if (configs.mode == 'week') {
						var first = renderDate.getDate() - renderDate.getDay(); // First day is the day of the month - the day of the week
						var last = first + 6; // last day is the first day + 6
						
						var firstDay = new Date(renderDate);
						firstDay.setDate(first)
						var lastDay = new Date(renderDate);
						lastDay.setDate(last);

						$divToolbar.find('.sc-center').html('<span>' + firstDay.getDate() 
							+ (firstDay.getMonth() != lastDay.getMonth() ? ' ' + getMonthString(firstDay.getMonth()) : '' ) 
							+ (firstDay.getFullYear() != lastDay.getFullYear() ? ' ' + firstDay.getFullYear() : '')
							+ ' - ' + lastDay.getDate() + ' ' + months[lastDay.getMonth()] + ', ' + lastDay.getFullYear() + '</span>');
					}
					else if (configs.mode == 'day') {
						var first = renderDate.getDate() - renderDate.getDay(); // First day is the day of the month - the day of the week
						var last = first + 6; // last day is the first day + 6

						$divToolbar.find('.sc-center').html('<span>' + getDayString(renderDate.getDay()) + ', ' 
							+ renderDate.getDate() + ' ' + months[renderDate.getMonth()] + ', ' + renderDate.getFullYear() + '</span>');
					}
				};
				
				renderBody = function () {
					if (configs.mode == 'month') {
						renderMonth(configs.data);
					}
					else if (configs.mode == 'week') {
						renderWeek(configs.data);
					}
					else if (configs.mode == 'day') {
						renderDay(configs.data);
					}
				};
				
				renderToolBar = function () {
					$divToolbar.addClass('sc-toolbar');
					var $divLeft = $(document.createElement('div'));
					$divLeft.addClass('sc-left');
					
					var $divBtnGroup = $(document.createElement('div'));
					var $btn = $(document.createElement('button'));
					$btn.html('<span><</span>');
					$btn.on('click', prevView);
					$divBtnGroup.append($btn);
					
					$btn = $(document.createElement('button'));
					$btn.html('<span>></span>');
					$btn.on('click', nextView);
					
					$divBtnGroup.append($btn);
					$divLeft.append($divBtnGroup);
					
					var $divCenter = $(document.createElement('div'));
					$divCenter.addClass('sc-center');
					$divCenter.html('<span>' + getMonthString(renderDate.getMonth()) + ', ' + renderDate.getFullYear() + '</span>');
					
					var $divRight = $(document.createElement('div'));
					$divRight.addClass('sc-right');
					
					$divBtnGroup = $(document.createElement('div'));
					$btn = $(document.createElement('button'));
					$btn.html('<span>month</span>');
					$btn.on('click', setMonthMode);
					
					$divBtnGroup.append($btn);
					$btn = $(document.createElement('button'));
					$btn.html('<span>week</span>');
					$btn.on('click', setWeekMode);
					
					$divBtnGroup.append($btn);
					$btn = $(document.createElement('button'));
					$btn.html('<span>day</span>');
					$btn.on('click', setDayMode);
					
					$divBtnGroup.append($btn);
					$divRight.append($divBtnGroup);
					
					$divToolbar.append($divLeft);
					$divToolbar.append($divCenter);
					$divToolbar.append($divRight);
					$element.append($divToolbar);
				};
				
				renderMonth = function (data) {
					var $divWrapper = $(document.createElement('div'));
					$divWrapper.addClass('sc-month-wrapper');
					var $tblCalendar = $(document.createElement('table'));
					var $thdCalendar = $(document.createElement('thead'));
					$thdCalendar.addClass('sc-month-head');
					var $trCalendar = $(document.createElement('tr'));
					var $tdCalendar = $(document.createElement('td'));
					
					renderMonthHeader($tdCalendar);
					
					$trCalendar.append($tdCalendar);
					$thdCalendar.append($trCalendar);
					$tblCalendar.append($thdCalendar);
					
					var $tbdCalendar = $(document.createElement('tbody'));
					$tbdCalendar.addClass('sc-month-body');
					$trCalendar = $(document.createElement('tr'));
					$tdCalendar = $(document.createElement('td'));
					
					renderMonthBody($tdCalendar, data);
					
					$trCalendar.append($tdCalendar);
					$tbdCalendar.append($trCalendar);
					$tblCalendar.append($tbdCalendar);
					$divWrapper.append($tblCalendar);
					
					$currentView.append($divWrapper);
				};
				
				renderMonthHeader = function ($parent) {
					var $divHeader = $(document.createElement('div'));
					var $tblHeader = $(document.createElement('table'));
					var $thdHeader = $(document.createElement('thead'));
					var $trHeader = $(document.createElement('tr'));
					
					for (var i = 0; i < 7; i++) {
						var $thHeader = $(document.createElement('th'));
						$thHeader.html('<span>' + getDayString(i) + '</span>');
						$trHeader.append($thHeader);
					}
					$thdHeader.append($trHeader);
					$tblHeader.append($thdHeader);
					$divHeader.append($tblHeader);
					$parent.append($divHeader);
				};
				
				renderMonthBody = function ($parent, data) {
					var firstDateMonth = new Date(renderDate.getFullYear(), renderDate.getMonth(), 1);
					var lastDateMonth = new Date(renderDate.getFullYear(), renderDate.getMonth() + 1, 0);
					
					var calendarStartDate = new Date(firstDateMonth);
					calendarStartDate.setDate(calendarStartDate.getDate() - (firstDateMonth.getDay() % 7));
					
					
					var calendarEndDate = new Date(lastDateMonth);
					calendarEndDate.setDate(calendarEndDate.getDate() + (6 - lastDateMonth.getDay()));
					
					var currentDate = calendarStartDate;
					
					while (currentDate <= calendarEndDate) {
						var $divBody = $(document.createElement('div'));
						var $tblCalendar = $(document.createElement('table'));
						var $thdCalendar = $(document.createElement('thead'));
						var $trCalendar = $(document.createElement('tr'));
						
						for (var i = 0; i < 7; i++) {
							var $thCalendar = $(document.createElement('th'));
							var $aCalendar = $(document.createElement('a'));
							$thCalendar.addClass('sc-day');
							$thCalendar.addClass('sc-' + shortDays[currentDate.getDay()]);
							$thCalendar.attr('data-goto', currentDate.toDateString());
							
							if (currentDate.getMonth() != renderDate.getMonth()) {
								$thCalendar.addClass('sc-other-month');
							}
							
							$aCalendar.html(currentDate.getDate());
							$aCalendar.attr('data-goto', currentDate.toDateString());
							$thCalendar.append($aCalendar);
							$trCalendar.append($thCalendar);
							currentDate.setDate(currentDate.getDate() + 1);
						}
						
						$thdCalendar.append($trCalendar);
						$tblCalendar.append($thdCalendar);
						$divBody.append($tblCalendar);
						$parent.append($divBody);
					}
				};
				
				renderWeek = function (data) {
					var $divWrapper = $(document.createElement('div'));
					$divWrapper.addClass('sc-week-wrapper');
					
					var $tblCalendar = $(document.createElement('table'));
					var $thdCalendar = $(document.createElement('thead'));
					$thdCalendar.addClass('sc-week-head');
					var $trCalendar = $(document.createElement('tr'));
					var $tdCalendar = $(document.createElement('td'));
					
					renderWeekHeader($tdCalendar);
					
					$trCalendar.append($tdCalendar);
					$thdCalendar.append($trCalendar);
					$tblCalendar.append($thdCalendar);
					
					var $tbdCalendar = $(document.createElement('tbody'));
					$tbdCalendar.addClass('sc-week-body');
					$trCalendar = $(document.createElement('tr'));
					$tdCalendar = $(document.createElement('td'));
					
					renderWeekBody($tdCalendar, data);
					
					$trCalendar.append($tdCalendar);
					$tbdCalendar.append($trCalendar);
					$tblCalendar.append($tbdCalendar);
					$divWrapper.append($tblCalendar);
					
					$currentView.append($divWrapper);
				};
				
				renderWeekHeader = function ($parent) {
					var $divHeader = $(document.createElement('div'));
					var $tblHeader = $(document.createElement('table'));
					var $thdHeader = $(document.createElement('thead'));
					var $trHeader = $(document.createElement('tr'));
					
					var $thHeader = $(document.createElement('th'));
					$trHeader.append($thHeader);
					
					var firstDayWeek = new Date(renderDate);
					firstDayWeek.setDate(firstDayWeek.getDate() - renderDate.getDay());
					
					for (var i = 0; i < 7; i++) {
						$thHeader = $(document.createElement('th'));
						$thHeader.html('<span>' + getDayString(i) + ' ' + (firstDayWeek.getMonth() + 1) + '/' + firstDayWeek.getDate() + '</span>');
						$trHeader.append($thHeader);
						firstDayWeek.setDate(firstDayWeek.getDate() + 1);
					}
					$thdHeader.append($trHeader);
					$tblHeader.append($thdHeader);
					$divHeader.append($tblHeader);
					$parent.append($divHeader);
				};
				
				renderWeekBody = function ($parent, data) {
					var $divAllDay = $(document.createElement('div'));
					var $tblAllDay = $(document.createElement('table'));
					var $thdAllDay = $(document.createElement('thead'));
					var $trAllDay = $(document.createElement('tr'));
					
					var $tdAllDay = $(document.createElement('td'));
					$tdAllDay.html('<span>all day</span>');
					$trAllDay.append($tdAllDay);
					
					for (var i = 0; i < 7; i++) {
						$tdAllDay = $(document.createElement('td'));
						$trAllDay.append($tdAllDay);
					}
					
					$thdAllDay.append($trAllDay);
					$tblAllDay.append($thdAllDay);
					$divAllDay.append($tblAllDay);
					$parent.append($divAllDay);
					
					var $divTimeBody = $(document.createElement('div'));
					var $tblTimeBody = $(document.createElement('table'));
					var $tbdTimeBody = $(document.createElement('tbody'));
					
					for (var i = 0; i < 48; i++) {
						var $trTimeBody = $(document.createElement('tr'));
						var $tdTimeBody = $(document.createElement('td'));
						if (i % 2 == 0) {
							var time = ((i % 24) / 2);
							time = ((time == 0) ? 12 : time);
							$tdTimeBody.html('<span>' + time + (i < 24 ? 'am' : 'pm') + '</span>');
						}
						$trTimeBody.append($tdTimeBody);
						
						for (var j = 0; j < 7; j++) {
							$tdTimeBody = $(document.createElement('td'));
							$trTimeBody.append($tdTimeBody);
						}
						$tbdTimeBody.append($trTimeBody);
					}
					$tblTimeBody.append($tbdTimeBody);
					$divTimeBody.append($tblTimeBody);
					$parent.append($divTimeBody);
				};
				
				renderDay = function (data) {
					var $divWrapper = $(document.createElement('div'));
					$divWrapper.addClass('sc-day-wrapper');
					
					var $tblCalendar = $(document.createElement('table'));
					var $thdCalendar = $(document.createElement('thead'));
					$thdCalendar.addClass('sc-day-head');
					var $trCalendar = $(document.createElement('tr'));
					var $tdCalendar = $(document.createElement('td'));
					
					renderDayHeader($tdCalendar);
					
					$trCalendar.append($tdCalendar);
					$thdCalendar.append($trCalendar);
					$tblCalendar.append($thdCalendar);
					
					var $tbdCalendar = $(document.createElement('tbody'));
					$tbdCalendar.addClass('sc-day-body');
					$trCalendar = $(document.createElement('tr'));
					$tdCalendar = $(document.createElement('td'));
					
					renderDayBody($tdCalendar, data);
					
					$trCalendar.append($tdCalendar);
					$tbdCalendar.append($trCalendar);
					$tblCalendar.append($tbdCalendar);
					$divWrapper.append($tblCalendar);
					
					$currentView.append($divWrapper);
				};
				
				renderDayHeader = function ($parent) {
					var $divHeader = $(document.createElement('div'));
					var $tblHeader = $(document.createElement('table'));
					var $thdHeader = $(document.createElement('thead'));
					var $trHeader = $(document.createElement('tr'));
					
					var $thHeader = $(document.createElement('th'));
					$trHeader.append($thHeader);
					
					$thHeader = $(document.createElement('th'));
					$thHeader.html('<span>' + getDayString(renderDate.getDay()) + ' '
						+ (renderDate.getMonth() + 1) + '/' + renderDate.getDate() + '</span>');
					$trHeader.append($thHeader);
					
					$thdHeader.append($trHeader);
					$tblHeader.append($thdHeader);
					$divHeader.append($tblHeader);
					
					$parent.append($divHeader);
				};
				
				renderDayBody = function ($parent, data) {
					var $divAllDay = $(document.createElement('div'));
					var $tblAllDay = $(document.createElement('table'));
					var $thdAllDay = $(document.createElement('thead'));
					var $trAllDay = $(document.createElement('tr'));
					
					var $tdAllDay = $(document.createElement('td'));
					$tdAllDay.html('<span>all day</span>');
					$trAllDay.append($tdAllDay);
					
					$tdAllDay = $(document.createElement('td'));
					$trAllDay.append($tdAllDay);
					
					$thdAllDay.append($trAllDay);
					$tblAllDay.append($thdAllDay);
					$divAllDay.append($tblAllDay);
					$parent.append($divAllDay);
					
					var $divTimeBody = $(document.createElement('div'));
					var $tblTimeBody = $(document.createElement('table'));
					var $tbdTimeBody = $(document.createElement('tbody'));
					
					for (var i = 0; i < 48; i++) {
						var $trTimeBody = $(document.createElement('tr'));
						var $tdTimeBody = $(document.createElement('td'));
						if (i % 2 == 0) {
							var time = ((i % 24) / 2);
							time = ((time == 0) ? 12 : time);
							$tdTimeBody.html('<span>' + time + (i < 24 ? 'am' : 'pm') + '</span>');
						}
						$trTimeBody.append($tdTimeBody);
						
						$tdTimeBody = $(document.createElement('td'));
						$trTimeBody.append($tdTimeBody);
						
						$tbdTimeBody.append($trTimeBody);
					}
					$tblTimeBody.append($tbdTimeBody);
					$divTimeBody.append($tblTimeBody);
					$parent.append($divTimeBody);
				};
				
				renderFooter = function () {
				};
				
				clearBody = function () {
					$currentView.empty();
				};
				
				prevView = function () {
					if (configs.mode == 'month') {
						renderDate.setMonth(renderDate.getMonth() - 1);
					}
					else if (configs.mode == 'week') {
						renderDate.setDate(renderDate.getDate() - 7);
					}
					else if (configs.mode == 'day') {
						renderDate.setDate(renderDate.getDate() - 1);
					}
					refreshView();
				};
				
				nextView = function () {
					if (configs.mode == 'month') {
						renderDate.setMonth(renderDate.getMonth() + 1);
					}
					else if (configs.mode == 'week') {
						renderDate.setDate(renderDate.getDate() + 7);
					}
					else if (configs.mode == 'day') {
						renderDate.setDate(renderDate.getDate() + 1);
					}
					refreshView();
				};
				
				setMonthMode = function () {
					if (configs.mode != 'month') {
						configs.mode = 'month';
						refreshView();
					}
				};
				
				setWeekMode = function () {
					if (configs.mode != 'week') {
						configs.mode = 'week';
						refreshView();
					}
				};
				
				setDayMode = function () {
					if (configs.mode != 'day') {
						configs.mode = 'day';
						refreshView();
					}
				};
				
				getDayString = function (day) {
					return (configs.shortDay ? shortDays[day] : days[day]);
				};
				
				getMonthString = function (month) {
					return (configs.shortMonth ? months[month] : months[month]);
				};
				
				init();
				
				return {
					element: element,
					refreshView: refreshView,
					prevView: prevView,
					nextView: nextView
				};
			});
			
			$.fn.scheduler = function (configs) {
				$element = $(this);
				var scheduler = $element.data('scheduler');
				
				if (scheduler) {
					
				}
				else if (!scheduler) {
					scheduler = new Scheduler(this, configs);
					$element.data('scheduler', scheduler);
				}
				

				return scheduler;
			};
		</script>
		<script>
			$('.divcalendar').scheduler({ test: true });
		</script>
	</body>
</html>
